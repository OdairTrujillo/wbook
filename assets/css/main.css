/* Wbook CSS */

/* VARIABLES */
:root {
  --headerBackground: #17213d;
  --textHeaderColor: #fff9ed;
  --sidebarBackground: rgba(255, 249, 237, 0.6);
  --mainBackground: rgba(255, 249, 237, 0.6);
  --footerBackground: rgba(255, 249, 237, 0.6);
  --linkNormal: #26408a;
  --linkHover: #4b6ece;
  --linkVisited: #26598c;
}

/* GENERAL RULES */
@charset "UTF-8";

* {
  margin: 0;
  box-sizing: border-box;
}

body {
  padding: 0;
  font-family: 'Open Sans', Helvetica, sans-serif;
}

h1, h2 {
  font-size: 16px;
  text-align: center;
  padding: 1rem 0.5rem;
}

h3, h4 {
  font-size: 16px;
  text-align: left;
  padding-bottom: 1rem;
}

p {
  font-size: 16px;
  text-align:justify;
  padding: 0.3rem 0;
  line-height: 1.3;
}

/* Superscript elements */
sup {
  font-size: 13px;
  font-weight: bold;
}

/* disable underline in links */
a {
  text-decoration: none;
}

/* unvisited link */
a:link {
  color: var(--linkNormal);
}

/* visited link */
a:visited {
  color: var(--linkVisited);
}

/* mouse over link */
a:hover {
  color: var(--linkHover);
}

/* selected link */
a:active {
  color: var(--linkHover);
}

.center-italic {
  text-align: center;
  font-style: italic;
  padding-bottom: 1rem;
}

/* SPECIFIC RULES */

/* The base container is a css grid, it is located into the baseof.html layout.
   Here is defined the tempaltes areas to build a grid with two columns and three rows */

/* The layout is arranged with mobile-first, so the layout is vertical */
.grid-container {
  display: grid;
  width: 100%;
  grid-template-columns: 1fr;
  grid-template-rows: 50px 1fr 1fr 100px; /* minmax sets the sidebar to shirnk when children does */
  grid-template-areas:
    "header"
    "sidebar"
    "main"
    "footer";
  height: 100vh;
  min-height: 0; /* Overriding min-height: auto; to forbid children to expand */
  min-width: 0; /* Necessary in Firefox  */
}

/* The header is a flex container, with the elements separated to the extremes, it is
   located into the baseof.html file. The parameter grid-area assigns a name to the
   header class inside de css grid (.grid-container)*/
.header {
  grid-area: header;
  display: flex;
  align-items: center;
  justify-content: space-between; /* This will separete the flex items to the extremes*/
  background-color: var(--headerBackground);
  padding: 0 8px;
}

/* These are the elements of the hader */
.header p {
  padding: 0;
  margin: 0;
  line-height: normal;
  color: var(--textHeaderColor);
}

.header__image-left {
  display: none;
}

.header__image-right {
  display: none;
}

.header__brand-title {
  display: inline-block;
}

.header__brand-title > p {
  font-size: 16px;
}

.header__book-title {
  display: inline-block;
}

.header__book-title > p {
  font-size: 18px;
}

.header__book-title > img {
  display: block;
  margin: 0 auto;
  width: 50px;
}

.header__brand-logo {
  display: inline-block;
  text-align: right;
}

.header__brand-logo img {
  width: 70%;
}

/* Another child element of the css grid base container */
.sidebar {
  grid-area: sidebar;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
  background-color: var(--sidebarBackground);
  padding: 10px 10px 5px 10px;
  max-height: 250px;
}

/* The child element of the flexbox sidebar, is the container of the whole TOC */
.sidebar__toc {
  flex-grow: 1;
  padding: 10px;
  width: 100%;
  overflow-y: auto;
}

.sidebar__toc-icon {

}

.sidebar__toc-serie {
  text-align: left;
  font-weight: bold;
  line-height: normal;
  cursor: pointer;
  color: darkcyan;
}

.sidebar__toc-serie:hover {
  color: DarkTurquoise;
}

.serie--active {
  background-color: rgba(255,255,255, 0.2); /* To highlight the active serie */
}

/* The wrapper of the calendar is used for hide the whole calendar */
.sidebar__toc-calendar-wrapper {
  max-height: 0px;
  overflow: hidden;
  transition: max-height 0.2s ease-out;
}

/* This is the calendar as such. */
.sidebar__toc-calendar {
  display: flex;
  align-items: flex-start;
  justify-content: left;
  flex-flow: row wrap;
  border: 1px solid;
  padding: 10px;
}

.sidebar__toc-calendar-title {
  text-align: center;
  padding: 0;
}

.sidebar__toc-calendar-item {
  text-align: center;
  width: 25px;
  height: 25px;
  margin: 2px;
  padding-top: 4px;
  border: 1px solid;
  border-radius: 50%

}
/* This child element of the flexbox sidebiar, is the container of cite box. */
/* It is hidden on mobiles, but it appears when a cite-title is clicked */
.sidebar__cite {
  max-height: 0px;
  font-style: italic;
  text-align: center;
  width: 100%;
  margin-top: 10px;
  transition: 0.3s ease;
  overflow-y: auto;
}

.sidebar__cite-button-hide {
  position: sticky;
  background-color: lightgreen;
  border: none;
  border-radius: 50%;
  padding: 2px 6px;
  color: white;
  font-size: 12px;
  font-weight: bold;
  cursor: pointer;
  margin-top: 5px;
}

/* This class will allow to have cite text invisible, that will be taken by the
javascript code that handles clicks on the cite-title elements  */
.cite-text {
  display: none;
}

.cite-title {
  cursor: pointer;
  color: darkcyan;
}

.cite-title:hover {
  color: DarkTurquoise;
}

/* The main container is a css grid, it is located into the single.html layout.
   Here is defined the tempaltes areas to build a grid with two columns and two rows.
   This is the reading area of the Wbook. */
.main {
  grid-area: main;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  background-color: var(--mainBackground);
}

/* The series title will ocupy the whole width of the main container. This element
   just shows the header text of the book. */
.series-title {
  align-self: center;
  font-family: serif;
  font-weight: bold;
  font-size: 120%;
  text-transform: capitalize;
  padding: 10px;
}

/* The primary-content container will receive the {{ .Content }} variable in Hugo */
.primary-content {
  padding: 10px;
}

/* The secondary-content will receive the {{ .Param.description }} that comes from the
   front-matter of the page.md */
.secondary-content {
  padding: 10px;
  margin-bottom: 10px;
}

.secondary-content img {
  padding: 0 10px;
  margin: 0 auto;
}

.secondary-content > :first-child {
  text-align: center;
}

.footer {
  grid-area: footer;
  display: flex;
  align-items: left;
  justify-content: space-between;
  background-color: var(--footerBackground);
  padding: 0 10px;
}

.footer__left-container {
  flex-basis: 20%;
}

.footer__social-author {
  display: flex;
  flex-flow: row wrap;
}

.footer__social-author > a {
  flex-basis: 50%;
}

.footer__book-code {
  font-size: 14px;
  flex-basis: 60%;
  text-align: center;
}

.footer__book-code-images {
  height: 36px;
}

.footer__book-code > p {
  text-align: center;
  font-size: 14px;
}

.footer__right-container {
  flex-basis: 20%;
}

.footer__social-editor {
  display: flex;
  flex-flow: row wrap;
}

.footer__social-editor > a {
  flex-basis: 50%;
}


/* Screens over 750px like tablets and desktops */
@media only screen and (min-width: 750px) {
  /* GENERAL RULES */
  body {
  }

  h1, h2 {
    font-size: 20px;
    padding: 2rem 1rem;
  }

  h3, h4 {
    font-size: 18px;
    padding-bottom: 2rem;
  }

  p {
    font-size: 18px;
    padding: 0.5rem 0;
    line-height: 1.6;
  }

  sup {
    font-size: 11px;
    font-weight: bold;
  }

  .center-italic {
    padding-bottom: 2rem;
  }

  /* SPECIFIC RULES */

  /* The header is a flex container, with the elements separated to the extremes, it is
     located into the baseof.html file. The parameter grid-area assigns a name to the
     header class inside de css grid (.grid-container)*/
  .header {
    background-image: url("../images/header_background.jpg");
    background-repeat: no-repeat;
    background-size: cover;
    padding: 0 8px;
  }

  .header__image-left {
    display: block;
    position: fixed;
    top: 0;
    left:0;
  }

  .header__image-right {
    display: block;
    position: fixed;
    top: 0;
    right:0;
  }

  .header__brand-title > p {
    font-size: 16px;
    margin-left: 80px;
  }

  .header__book-title > p {
    font-size: 42px;
  }

  .header__book-title > img {
    display: block;
    margin: 0 auto;
    width: 72px;
  }

  .header__brand-logo {
    display: inline-block;
    text-align: right;
    margin-right: 80px;
  }

  .header__brand-logo img {
    width: 70%;
  }

  /* The base container is a css grid, it is located into the baseof.html layout.
     Here is defined the tempaltes areas to build a grid with two columns and three rows */
  .grid-container {
    grid-template-columns: 0.2fr 1fr;
    grid-template-rows: 100px 1fr 70px;
    grid-template-areas:
      "header header"
      "sidebar main"
      "footer footer";
  }

  .sidebar {
    height: 100%;
    max-height: 100%;
    min-height: 0;
  }

  /* The main container is a css grid, it is located into the single.html layout.
     Here is defined the tempaltes areas to build a grid with two columns and two rows.
     This is the reading area of the Wbook. */
  .main {
    grid-area: main;
    display: grid;
    grid-template-columns: 2fr 1fr;
    grid-template-rows: 50px 1fr;
    grid-template-areas:
      "series-title series-title"
      "primary-content secondary-content";
    min-height: 0; /* Overriding min-height: auto; to forbid children to expand */
    min-width: 0; /* Necessary in Firefox  */
  }

  .series-title {
    grid-area: series-title;
    font-size: 150%;
    padding: 20px;
  }

  .primary-content {
    grid-area: primary-content;
    height: 100%;
    overflow-y: auto;
    min-height: 0; /* Overriding min-height: auto; to forbid children to expand */
  }

  .secondary-content {
    grid-area: secondary-content;
    height: 100%;
    overflow-y: auto;
    min-height: 0; /* Overriding min-height: auto; to forbid children to expand */
  }

  /* This child element of the flexbox sidebiar, is the container of cite box. */
  /* It is hidden on mobiles, but it appears when a cite-title is clicked */
  .sidebar__cite {
    max-height: none;
    padding: 10px;
    height: 210px;
    border: 1px solid;
    overflow-y: auto;
    margin-bottom: 5px;
  }

  .sidebar__cite-button-hide {
    display: none;
  }
}
